<section class="uk-section">
    <div class="uk-card uk-card-default uk-card-body
        uk-width-1-2@m uk-align-center">
        <!-- encType es para que pueda enviar ficheros -->
        <form method="post" action="/publicar" encType="multipart/form-data">
            <fieldset class="uk-fieldset">

                <legend class="uk-legend">Nueva noticia </legend>

                <div class="uk-margin">
                    <div class="uk-inline uk-width-1-1">
                        <label class="uk-form-label">
                            Título
                        </label>
                        <div class="uk-inline">
                            <button class="uk-icon-button" uk-icon="info"></button>
                            <div uk-dropdown >
                                <span class="uk-text-muted">El título de la noticia con el que se "resume" brevemente el contenido.</span>
                            </div>
                        </div>
                        <input class="uk-input" type="text"
                               name="titulo"
                               placeholder="Ej: España asciende en el ranking Europeo de habitantes."
                               required="true">
                    </div>
                </div>
                <div class="uk-margin">
                    <div class="uk-inline uk-width-1-1">
                        <label class="uk-form-label">
                            Subtítulo
                        </label>
                        <div class="uk-inline">
                            <button class="uk-icon-button" uk-icon="info"></button>
                            <div uk-dropdown >
                                <span class="uk-text-muted">El subtítulo o entrada de la noticia.</span>
                            </div>
                        </div>
                        <input class="uk-input" type="text"
                               name="subtitulo"
                               placeholder="Ej: El ranking de países mostrado en el diario El Mundo muestra el crecimiento de nuestro país"
                               required="true">
                    </div>
                </div>
                <div class="uk-margin">
                    <div class="uk-inline uk-width-1-1">
                        <label class="uk-form-label">Categoría</label>
                        <div class="uk-inline">
                            <button class="uk-icon-button" uk-icon="info"></button>
                            <div uk-dropdown >
                                <span class="uk-text-muted">La categoría a la que pertenece la noticia y con la que se podrá clasificar.</span>
                            </div>
                        </div>
                        <select class="uk-select" name="categoria"
                                required="true">
                            <option value="deportes">Deportes</option>
                            <option value="economia">Economía</option>
                            <option value="internacional">Internacional</option>
                            <option value="nacional">Nacional</option>
                            <option value="opinion">Opinión</option>
                            <option value="politica">Política</option>
                            <option value="sociedad">Sociedad</option>
                            <option value="television">Televisión</option>
                        </select>
                    </div>
                </div>
                <div class="uk-margin">
                    <div class="uk-inline uk-width-1-1">
                        <label class="uk-form-label">
                            Fecha
                        </label>
                        <div class="uk-inline">
                            <button class="uk-icon-button" uk-icon="info"></button>
                            <div uk-dropdown >
                                <span class="uk-text-muted">Fecha de publicación o de ocurrencia de la noticia.</span>
                            </div>
                        </div><br>
                        <input style="width: 35%;" class="uk-input" type="date"
                               name="fecha" required="true" value="{{ hoy }}" data-uk-datepicker="{format:'DD.MM.YYYY'}">
                    </div>
                </div>
                <div class="uk-margin">
                    <div class="uk-inline uk-width-1-1">
                        <label class="uk-form-label">Cuerpo</label>
                        <div class="uk-inline">
                            <button class="uk-icon-button" uk-icon="info"></button>
                            <div uk-dropdown >
                                <span class="uk-text-muted">Descripción del resto de la noticia detalladamente.</span>
                            </div>
                        </div>
                        <textarea class="uk-textarea" rows="5"
                                  name="cuerpo"
                                  placeholder="Ej: Según el ranking publicado por el Diario El Mundo, España sigue creciendo..."
                                  required="true"></textarea>
                    </div>
                </div>
                <div class="uk-margin">
                    <label class="uk-form-label">Foto</label>

                    <div uk-form-custom="target: true">
                        <input type="file" name="foto" accept="image/png">
                        <input class="uk-input" type="text"
                               placeholder="Selecciona fichero">
                    </div>

                    <!-- Intento de arrastrar imagen, esta fallando -->
                   <!-- <div class="js-upload uk-placeholder uk-text-center" uk-form-custom="target: true">
                        <span uk-icon="icon: cloud-upload"></span>
                        <span class="uk-text-middle">Arrastre y suelte la imagen aquí para añadirla o</span>
                        <div uk-form-custom>
                            <input type="file" name="foto" accept="image/png">
                            <span class="uk-link">selecciona una.</span>
                        </div>
                    </div>

                    <progress id="js-progressbar" class="uk-progress" value="0" max="100" hidden></progress>

                    <script>

                        var bar = document.getElementById('js-progressbar');

                        UIkit.upload('.js-upload', {

                            url: '',
                            multiple: false,

                            beforeSend: function () {
                                console.log('beforeSend', arguments);
                            },
                            beforeAll: function () {
                                console.log('beforeAll', arguments);
                            },
                            load: function () {
                                console.log('load', arguments);
                            },
                            error: function () {
                                console.log('error', arguments);
                            },
                            complete: function () {
                                console.log('complete', arguments);
                            },

                            loadStart: function (e) {
                                console.log('loadStart', arguments);

                                bar.removeAttribute('hidden');
                                bar.max = e.total;
                                bar.value = e.loaded;
                            },

                            progress: function (e) {
                                console.log('progress', arguments);

                                bar.max = e.total;
                                bar.value = e.loaded;
                            },

                            loadEnd: function (e) {
                                console.log('loadEnd', arguments);

                                bar.max = e.total;
                                bar.value = e.loaded;
                            },

                            completeAll: function () {
                                console.log('completeAll', arguments);

                                setTimeout(function () {
                                    bar.setAttribute('hidden', 'hidden');
                                }, 1000);

                                alert('Upload Completed');
                            }

                        });

                    </script>-->
                </div>

                <button class="uk-button uk-button-primary uk-width-1-1
                        uk-margin-small-bottom"
                        type="submit">
                    Publicar
                </button>
            </fieldset>
        </form>
    </div>
</section>
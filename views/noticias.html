<nav class="uk-navbar-container" uk-navbar>
    <div class="uk-navbar-center uk-visible@m">
        <ul class="uk-navbar-nav">
            <li class="uk-parent"><a href="/noticias" name="categoria">Portada</a></li>
            <li class="uk-parent"><a href="/noticias?categoria=politica" name="categoria">Política</a></li>
            <li class="uk-parent"><a href="/noticias?categoria=economia" name="categoria">Economía</a></li>
            <li class="uk-parent"><a href="/noticias?categoria=sociedad" name="categoria">Sociedad</a></li>
            <li class="uk-parent"><a href="/noticias?categoria=cultura" name="categoria">Cultura y ciencia</a></li>
            <li class="uk-parent"><a href="/noticias?categoria=deportes" name="categoria">Deportes</a></li>
            <li class="uk-parent"><a href="/noticias?categoria=television" name="categoria">Televisión</a></li>
            <li class="uk-parent"><a href="/noticias?categoria=gente" name="categoria">Gente</a></li>
            <li class="uk-parent"><a href="/noticias?categoria=opinion" name="categoria">Opinión</a></li>
        </ul>
    </div>
</nav>

<section class="uk-section uk-section-default">
    <div class="uk-container">

        <div class="uk-inline uk-width-1-1 uk-align-center uk-margin-small-bottom">
            <div>
                <form method="get" action="/noticias" class="uk-margin uk-grid" style="align-items: flex-end">
                    <div id="btnFilter" class="uk-align-center" style="margin: initial">
                        <button class="uk-icon-button" uk-icon="plus" title="Añadir filtro" onclick="habilitarFiltroAutor(); return false;"></button>
                    </div>
                    <div id="autorFilter" class="uk-width-1-2 uk-hidden">
                        <label class="uk-form-label">
                            Autor
                        </label>
                        <input class="uk-input"
                               name="usuario"
                               type="search" placeholder="Buscar autor">
                    </div>
                    <div class="uk-width-expand" style="padding-left: 10px">
                        <label class="uk-form-label">
                            Título
                        </label>
                        <input class="uk-input"
                               name="titulo"
                               type="search" placeholder="Buscar título">
                    </div>

                    <div class="uk-width-1-1">
                        <button class="uk-button uk-button-secondary uk-width-1-1 uk-margin-small-top"
                                type="submit"><span uk-search-icon></span>
                            Buscar
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <p><strong>{{noticias.length}} resultados</strong></p>

        <!-- sin incluir uk-grid no va el grid -->
        <div class="uk-child-width-1-2@m" uk-grid>

            {{#if numero}}
            {{#each noticias}}
            <div >
                <div class="uk-card uk-card-default uk-card-small uk-grid uk-grid-collapse uk-child-width-1-2 uk-margin uk-card-hover uk-responsive-height">
                    <div class="uk-card-media-left uk-cover-container">
                        <img class="uk-cover" src="/subidas/{{ _id }}.png">
                    </div>
                    <div>
                        <div class="uk-card-body">
                            {{#ifEquals categoria "politica" }}
                                <div class="uk-card-badge "><img style="height:40px;" src="/images/politica.png" title="Política"/></div>
                            {{/ifEquals}}
                            {{#ifEquals categoria "economia" }}
                                <div class="uk-card-badge "><img style="height:40px;" src="/images/euro.png" title="Economía"/></div>
                            {{/ifEquals}}
                            {{#ifEquals categoria "sociedad" }}
                            <div class="uk-card-badge "><img style="height:40px;" src="/images/society.png" title="Sociedad"/></div>
                            {{/ifEquals}}
                            {{#ifEquals categoria "cultura" }}
                            <div class="uk-card-badge "><img style="height:40px;" src="/images/atom.png" title="Cultura y ciencia"/></div>
                            {{/ifEquals}}
                            {{#ifEquals categoria "deportes" }}
                                <div class="uk-card-badge "><img style="height:40px;" src="/images/football.png" title="Deportes"/></div>
                            {{/ifEquals}}
                            {{#ifEquals categoria "television" }}
                                <div class="uk-card-badge "><img style="height:40px;" src="/images/television.png" title="Televisión"/></div>
                            {{/ifEquals}}
                            {{#ifEquals categoria "gente" }}
                            <div class="uk-card-badge "><img style="height:40px;" src="/images/heart.png" title="Gente"/></div>
                            {{/ifEquals}}
                            {{#ifEquals categoria "opinion" }}
                                <div class="uk-card-badge "><img style="height:40px;" src="/images/opinion.png" title="Opinión"/></div>
                            {{/ifEquals}}
                            <h3 class="uk-card-title uk-margin-large-top">{{ titulo }}</h3>
                            <p>{{ subtitulo }}.</p>
                            <div class="uk-grid uk-margin uk-child-width-1-2">
                                <div class="uk-width-2-5 ">
                                    <a class="uk-button uk-button-primary uk-button-small"
                                       href="/detalle/{{ _id }}">
                                        Más...
                                    </a>
                                </div>
                                <div class="uk-width-3-5@m">
                                    <div>
                                        {{#if usuarioAutenticado}}
                                        <a href="/noticia/{{ _id }}/compartir" class="uk-margin-small-right" ><span  uk-icon="social" title="Compartir"></span></a>
                                        {{/if}}
                                        {{#if adminNoticia }}
                                        <div class="uk-inline">
                                            <button class="uk-icon-button" uk-icon="more"></button>
                                            <div uk-dropdown style="padding: 0px; min-width: 0px">
                                                <a href="/noticia/{{ _id }}/modificar" ><span class="uk-icon-button uk-margin-small-bottom" uk-icon="pencil" title="Editar"></span></a>
                                                <a href="/eliminar/{{ _id }}/noticia" ><span class="uk-icon-button" uk-icon="trash" title="Eliminar"></span></a>
                                            </div>
                                        </div>
                                        {{/if}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{/each}}

            {{/if}}
            {{^numero}}
            <div class="uk-align-center">
                <img src="/images/sinResultados.PNG">
            </div>
            {{/numero}}
        </div>

        <a class="uk-button uk-button-secondary uk-width-expand uk-margin-medium-top" href="#top" uk-scroll>Subir</a>

    </div>
</section>

<script>
    window.onload = function() {
        //Al cargar la pagina se aplica el atributo "uk-sticky" al header para que se mantenga fijo al hacer scroll
        var att = document.createAttribute("uk-sticky");       // Create a "class" attribute
        att.value = "top:200";                                 // Set the value of the class attribute
        document.getElementsByTagName("header")[0].setAttributeNode(att);
    };
    function habilitarFiltroAutor() {
        document.getElementById("autorFilter").classList.remove("uk-hidden");
        document.getElementById("btnFilter").classList.add("uk-hidden");
    }
</script>